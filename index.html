<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

</head>
<body>
    
    <br>
    <main class="container">
        <div id="app"></div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>

        var app4 = new Vue({
            el: '#app',
            template: `

                <div class="card">

                    <div class="card-body">

                        <div class="form-group">
                            <label for="nome"> Nome </label>
                            <input name="nome" v-model="nome" type="text" class="form-control" id="nome" aria-describedby="emailHelp">
                        </div>

                        <div class="form-group">
                            <label for="comentario"> Comentario </label>
                            <textarea name="comentario" v-model="comentario" type="text" class="form-control" id="comentario" aria-describedby="emailHelp"></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary" v-on:click="adicionarComentario"> Enviar </button>

                    </div>

                    <ul>
                        <li v-for="(dados, index) in allComments">
                            {{ dados.nome }}
                            {{ dados.comentario }}
                            <button v-on:click="deletar(index)"> Deletar </button>
                        </li>

                    </ul>

                </div> 

               

            `,
            data() {
                
                return {
                    chat: [],
                    nome: '',
                    comentario: ''
                }
  
            }, 

            methods: {

                adicionarComentario() {

                    // if(this.nome.trim() === '' || this.comentario.trim() === '') return;

                    this.chat.push({
                        nome: this.nome, 
                        comentario: this.comentario 
                    })
                    this.nome = ''
                    this.comentario = ''
                },


                deletar(dados) {

                    this.chat.splice(dados, 1)

                }

            },

            computed: {

                allComments() {

                    return this.chat.map(dados => {
                        nome = dados.nome.trim() == '' ? 'Sem nome' : dados.nome
                    })

                }

            }

        })

    </script>

</body>
</html>